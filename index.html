<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        UI coming soon
    </body>
    <script>
        const handVariants = ['rock', 'paper', 'scissors'];
        const SENTINEL = -1;


        function playerHand(variantArr) {
            let input = prompt('Choose your hand - rock, paper or scissors?');
            if(input === SENTINEL) {
                return SENTINEL;
            }
            if(input !== null) {
                let userChoise = input.toLocaleLowerCase();
                if (variantArr.includes(userChoise)) {
                    console.log(`You choose ${ userChoise }`);
                    console.log(variantArr.indexOf(userChoise));
                    return variantArr.indexOf(userChoise);
                    } else {
                        alert('You picked wrong variant of hand or have a typo.');
                        playerHand(variantArr);
                    }
                }else{
                    return SENTINEL;

            }
        }

        function computerHand(variantArr) {
            let compChoise = Math.floor(Math.random() * Math.floor(variantArr.length));
            console.log(`Computer choose ${ variantArr[compChoise] }`);
            console.log(compChoise);
            return compChoise;
        }

        function singleRound(playerSelection, computerSelection) {
            if (playerSelection === computerSelection) {
                console.log(` It\'s a tie.`);
                return NaN;
            }else if (playerSelection === 0 && computerSelection === 2){
                console.log(` You won!`);
                return true;
            } else if (playerSelection > computerSelection){
                console.log(` You won!`);
                return true;
            }else{
                console.log(` You lose...`);
                return false;
            }
        }

        function game (variantArr) {
            let playerScore = 0;
            let compScore = 0;
            let winPoints = 5;
            let roundResult;

            while(playerScore < winPoints && compScore < winPoints) {
                let player = playerHand(variantArr);
                let computer = computerHand(variantArr);
                roundResult = singleRound(player, computer);
                switch(roundResult) {
                    case true:
                        playerScore++;
                        console.log(`The score is Player ${ playerScore } - ${ compScore } Computer`);
                        break;
                    case false:
                        compScore++;
                        console.log(`The score is Player ${ playerScore } - ${ compScore } Computer`);
                        break;
                    default:
                        console.log(`The score is Player ${ playerScore } - ${ compScore } Computer`);
                        break;
                }
                if(playerScore === winPoints) {
                    console.log("You won the game! Hit F5 to play again");
                }
                if(compScore === winPoints) {
                    console.log("You've lost the game! Hit F5 to play again");
                }
            }
        }

        game(handVariants);



    </script>
</html>